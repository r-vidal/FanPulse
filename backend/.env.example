# =============================================================================
# FanPulse Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=FanPulse
APP_ENV=development  # Options: development, staging, production
DEBUG=True  # Set to False in production
SECRET_KEY=your-secret-key-here-change-in-production  # Generate with: openssl rand -hex 32

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/fanpulse
DATABASE_POOL_SIZE=5

# -----------------------------------------------------------------------------
# Redis & Caching
# -----------------------------------------------------------------------------
# Redis is used for caching and as Celery broker
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Celery (Background Tasks)
# -----------------------------------------------------------------------------
# Celery uses Redis as message broker and result backend
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Celery Beat Schedule (Periodic Tasks):
# - Fetch artist data from platforms: Every 6 hours
# - Calculate FVS: Daily at 3 AM UTC
# - Calculate Momentum Index: Every 6 hours
# - Detect viral spikes: Every 3 hours
# - Refresh OAuth tokens: Every hour
# - Send weekly reports: Monday 8 AM UTC
# - Clean up expired data: Daily 2-3 AM UTC

# Flower (Celery Monitoring UI) runs on port 5555
# Access at: http://localhost:5555

# -----------------------------------------------------------------------------
# Frontend URL
# -----------------------------------------------------------------------------
FRONTEND_URL=http://localhost:3000  # Change to your production frontend URL

# -----------------------------------------------------------------------------
# Platform API Credentials
# -----------------------------------------------------------------------------

# Spotify API
# Get credentials at: https://developer.spotify.com/dashboard
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
SPOTIFY_REDIRECT_URI=http://localhost:3000/connect/spotify/callback

# Note: For real-time streaming data, you need Spotify for Artists API access
# Apply at: https://developer.spotify.com/documentation/web-api/concepts/spotify-for-artists

# Apple Music API
# Get credentials at: https://developer.apple.com/music/
APPLE_TEAM_ID=
APPLE_KEY_ID=
APPLE_PRIVATE_KEY=

# Instagram API (Meta/Facebook)
# Get credentials at: https://developers.facebook.com/
INSTAGRAM_CLIENT_ID=
INSTAGRAM_CLIENT_SECRET=
INSTAGRAM_REDIRECT_URI=http://localhost:3000/connect/instagram/callback

# TikTok API
# Get credentials at: https://developers.tiktok.com/
TIKTOK_CLIENT_KEY=
TIKTOK_CLIENT_SECRET=
TIKTOK_REDIRECT_URI=http://localhost:3000/connect/tiktok/callback

# YouTube API
# Get credentials at: https://console.cloud.google.com/
YOUTUBE_API_KEY=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=
YOUTUBE_REDIRECT_URI=http://localhost:3000/connect/youtube/callback

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT tokens for API authentication
JWT_SECRET_KEY=your-jwt-secret-key-here  # Generate with: openssl rand -hex 32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30  # Access token validity
REFRESH_TOKEN_EXPIRE_DAYS=7  # Refresh token validity

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# -----------------------------------------------------------------------------
# Email Service (SendGrid)
# -----------------------------------------------------------------------------
# Get API key at: https://sendgrid.com/
SENDGRID_API_KEY=
FROM_EMAIL=noreply@fanpulse.io

# -----------------------------------------------------------------------------
# Payment Processing (Stripe)
# -----------------------------------------------------------------------------
# Get credentials at: https://dashboard.stripe.com/
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# Stripe Products (create these in Stripe Dashboard):
# - SOLO: $29/month
# - PRO: $99/month
# - LABEL: $499/month
# - ENTERPRISE: Custom pricing

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=100  # API requests per minute per user

# -----------------------------------------------------------------------------
# Monitoring & Error Tracking (Optional)
# -----------------------------------------------------------------------------
# Sentry for error tracking
# SENTRY_DSN=

# Better Stack for uptime monitoring
# BETTERSTACK_API_KEY=

# -----------------------------------------------------------------------------
# Production Deployment Notes
# -----------------------------------------------------------------------------
# When deploying to production (Railway, Render, etc.):
#
# 1. Database: Use managed PostgreSQL (Railway Postgres, AWS RDS, etc.)
# 2. Redis: Use managed Redis (Railway Redis, Upstash, etc.)
# 3. Set DEBUG=False
# 4. Generate strong SECRET_KEY and JWT_SECRET_KEY
# 5. Update FRONTEND_URL to production domain
# 6. Update all REDIRECT_URI to production URLs
# 7. Configure CORS_ORIGINS with production domain
# 8. Set up environment variables in your hosting platform
# 9. Enable SSL/HTTPS for all endpoints
# 10. Set up monitoring and alerts
#
# Services needed for production:
# - Backend API (FastAPI)
# - Celery Worker (background tasks)
# - Celery Beat (task scheduler)
# - Flower (monitoring UI)
# - PostgreSQL (database)
# - Redis (cache & broker)
# =============================================================================
